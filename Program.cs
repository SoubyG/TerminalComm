using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace NetsCommunication
{
    class Program
    {
        static void Main(string[] args)
        {
            NetsCommunication netsCommunication = new NetsCommunication();

            byte[] logonCommand = new byte[] { 0x02, 0x00, 0x18, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x30, 0x31, 0x32, 0x38, 0x30, 0x30, 0x31, 0x30, 0x1C, 0x03, 0x3C };
            var transactionStatus = netsCommunication.ExecuteCommand(logonCommand);
            Console.WriteLine("TransactionStatus:" + transactionStatus.Item1 + "\n");
            if(transactionStatus.Item2 != null)
            Console.WriteLine("TransactionStatus:" + Encoding.ASCII.GetString(transactionStatus.Item2) + "\n");
            //Thread.Sleep(1000);


            // Initialisation command to simulate 2.2.1
            byte[] cmd = new byte[] { 0x02, 0x00, 0x18, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x30, 0x31, 0x32, 0x35, 0x35, 0x30, 0x31, 0x30, 0x1C, 0x03, 0x34 };
            //transactionStatus = netsCommunication.ExecuteCommand(cmd);
           // Thread.Sleep(1000);

            // Wrong command to simulate 2.2.2.1
            string cmd1 = "02006531323334353637383930313233303031301C5432000230311C34330001301C343000123030303030303030393939391C343200123030303030303030303030301C031B";
            byte[] cmd1Arr = Encoding.ASCII.GetBytes(cmd1);
            // transactionStatus = netsCommunication.ExecuteCommand(cmd1Arr);

            // Nets transaction command
            byte[] cmd2Arr = new byte[] { 0x02, 0x00, 0x65, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x37, 0x38, 0x39, 0x30, 0x31, 0x32, 0x33, 0x30, 0x30, 0x31, 0x30, 0x1C, 0x54, 0x32, 0x00, 0x02, 0x30, 0x31, 0x1C, 0x34, 0x33, 0x00, 0x01, 0x30, 0x1C, 0x34, 0x30, 0x00, 0x12, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x39, 0x39, 0x39, 0x39, 0x1C, 0x34, 0x32, 0x00, 0x12, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x1C, 0x03, 0x1B };           
            //transactionStatus = netsCommunication.ExecuteCommand(cmd2Arr);
            Console.Read();

        }
    }
}
